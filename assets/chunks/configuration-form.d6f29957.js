import{d as q,u as O,e as U,f as g,E as H,g as A,h as M,i as Y,j as J,k as K,o as y,c as L,l as s,a as t,w as o,F as R,m as Q,n as V,p as E,q as p,s as W,t as X,v as Z,x as D,y as ee,z as te,A as oe,R as le,B as se,C as ae,D as ne,G as re,_ as ie}from"../app.e85ba5bf.js";import{g as ue}from"./configFileURL.34a6daab.js";import{Y as pe}from"./css-vars.4dafb329.js";const de=[{name:"",url:""}],u=v=>(se("data-v-7acd6ae4"),v=v(),ae(),v),ce={class:"w-full px-5 mb-6 text-gray-500 flex flex-col items-center justify-center"},me=u(()=>s("h4",null,"Step 1: Enter or select the URL of the template.",-1)),_e={class:"flex justify-start mb-5"},fe=u(()=>s("div",{class:"i-carbon-view mr-2"},null,-1)),ge=u(()=>s("h4",null,"Step 2: Enter the owner and name of the repository.",-1)),ve=u(()=>s("h4",null,"Step 3: Select the destination of the template.",-1)),he=u(()=>s("div",{class:"flex"},[s("div",{class:"i-simple-icons-github mr-2"}),p(" GitHub Issue ")],-1)),ye=u(()=>s("div",{class:"flex"},[s("div",{class:"i-simple-icons-github mr-2"}),p(" GitHub Discussion ")],-1)),be=u(()=>s("div",{class:"flex"},[s("div",{class:"i-simple-icons-gitee mr-2"}),p(" Gitee Issue ")],-1)),we={class:"flex justify-center"},Ve=u(()=>s("div",{class:"i-carbon-launch mr-2"},null,-1)),xe=u(()=>s("div",{class:"i-carbon-copy mr-2"},null,-1)),Ce=u(()=>s("div",{class:"i-carbon-reset mr-2"},null,-1)),ke={class:"flex justify-center"},Ue={class:"w-full sm:w-85% md:w-50%"},Le={class:"dialog-footer"},Re=q({__name:"configuration-form",setup(v){const I=()=>ne.success({message:"Copy link successful!"}),{copy:S,isSupported:T}=O(),n=U({repoOwner:"",repoName:"",templateURL:"",postDestination:[]}),c=g(),z=U({repoOwner:[{required:!0,message:"Please input owner of repository.",trigger:"blur"}],repoName:[{required:!0,message:"Please input owner of name.",trigger:"blur"}],templateURL:[{required:!0,message:"Please input URL of template.",trigger:"blur"}],postDestination:[{type:"array",required:!0,message:"Please select at least one post destination.",trigger:"change"}]}),x=g({name:"",description:""}),b=g({}),m=g({}),h=g(!1),F=(r,e)=>e.templateURL=r,G=async(r,{templateURL:e})=>{try{await(r==null?void 0:r.validateField("templateURL"));const a=await ue(e),i=pe.parse(a||""),[_,f,d]=Z(i);x.value=_,b.value=f,m.value=d,h.value=!0}catch(a){console.error("[Error]: Field validation error.",a)}},C=({repoOwner:r,repoName:e,templateURL:a,postDestination:i})=>{const{origin:_}=location,f=new URLSearchParams({owner:r,name:e,templateURL:a,postDestination:i.join(",")}).toString();return`${_}${re(`/poster/?${f}`)}`},N=async(r,e)=>{if(!await D(r))return;const a=C(e);window==null||window.open(a)},P=async(r,e)=>{if(!await D(r))return;const a=C(e);S(a),I()};return(r,e)=>{const a=ee,i=te,_=H,f=A,d=M,w=Y,$=J,k=oe,B=le,j=K;return y(),L(R,null,[s("div",ce,[t(k,{ref_key:"configurationFormRef",ref:c,model:n,"label-width":"200px","label-position":"left",rules:z,class:"w-full",size:"large"},{default:o(()=>[me,t(i,{label:"The template's URL",prop:"templateURL"},{default:o(()=>[t(a,{placeholder:"Please type the URL of the template file.",modelValue:n.templateURL,"onUpdate:modelValue":e[0]||(e[0]=l=>n.templateURL=l)},null,8,["modelValue"])]),_:1}),t(i,{label:"Recommendation Template",prop:"changeTemplateURL"},{default:o(()=>[t(f,{placeholder:"You can choose the default template.",class:"w-full"},{default:o(()=>[(y(!0),L(R,null,Q(V(de),l=>(y(),E(_,{label:l.name,value:l.url,onClick:Ee=>F(l.url,n)},null,8,["label","value","onClick"]))),256))]),_:1})]),_:1}),s("div",_e,[t(d,{type:"primary",size:"large",round:"",onClick:e[1]||(e[1]=l=>G(c.value,n))},{default:o(()=>[fe,p(" Preview ")]),_:1})]),ge,t(i,{label:"The repository's owner",prop:"repoOwner"},{default:o(()=>[t(a,{placeholder:"Type the owner of the code repository.",modelValue:n.repoOwner,"onUpdate:modelValue":e[2]||(e[2]=l=>n.repoOwner=l)},null,8,["modelValue"])]),_:1}),t(i,{label:"The repository's name",prop:"repoName"},{default:o(()=>[t(a,{placeholder:"Type the name of the code repository.",modelValue:n.repoName,"onUpdate:modelValue":e[3]||(e[3]=l=>n.repoName=l)},null,8,["modelValue"])]),_:1}),ve,t(i,{label:"The posting's destination",prop:"postDestination"},{default:o(()=>[t($,{size:"large",placeholder:"5555",modelValue:n.postDestination,"onUpdate:modelValue":e[4]||(e[4]=l=>n.postDestination=l)},{default:o(()=>[t(w,{label:"GitHub_issue",name:"type",size:"large"},{default:o(()=>[he]),_:1}),t(w,{label:"GitHub_discussion",name:"type",size:"large"},{default:o(()=>[ye]),_:1}),t(w,{label:"Gitee_issue",name:"type",size:"large"},{default:o(()=>[be]),_:1})]),_:1},8,["modelValue"])]),_:1}),s("div",we,[t(d,{type:"primary",size:"large",round:"",onClick:e[5]||(e[5]=l=>N(c.value,n))},{default:o(()=>[Ve,p(" Visit ")]),_:1}),V(T)?(y(),E(d,{key:0,size:"large",round:"",onClick:e[6]||(e[6]=l=>P(c.value,n))},{default:o(()=>[xe,p(" Copy Link ")]),_:1})):W("",!0),t(d,{type:"danger",size:"large",round:"",onClick:e[7]||(e[7]=l=>V(X)(c.value))},{default:o(()=>[Ce,p(" Rest ")]),_:1})])]),_:1},8,["model","rules"])]),t(j,{modelValue:h.value,"onUpdate:modelValue":e[10]||(e[10]=l=>h.value=l),title:"Template Preview",fullscreen:"","align-center":"",center:""},{footer:o(()=>[s("span",Le,[t(d,{type:"danger",size:"large",onClick:e[9]||(e[9]=()=>h.value=!1),round:""},{default:o(()=>[p("Colse")]),_:1})])]),default:o(()=>[s("div",ke,[s("div",Ue,[t(k,{model:m.value,rules:b.value,size:"large","label-position":"top"},{default:o(()=>[t(B,{formInfo:x.value,rules:b.value,data:m.value},{title:o(()=>[t(i,{class:"mt-6 mb-10!",label:"Title",required:"",prop:"title"},{default:o(()=>[t(a,{modelValue:m.value.title,"onUpdate:modelValue":e[8]||(e[8]=l=>m.value.title=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["formInfo","rules","data"])]),_:1},8,["model","rules"])])])]),_:1},8,["modelValue"])],64)}}});const Te=ie(Re,[["__scopeId","data-v-7acd6ae4"]]);export{Te as _};
